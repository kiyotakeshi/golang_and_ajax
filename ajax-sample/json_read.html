<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>json read by ajax</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        jQuery(function ($) {

            // h1タグ要素をクリックするとJSONの値をliタグで表示
            $("#click").on("click", function () {
                $.ajax({
                    type: 'GET',
                    url: "http://localhost:3000/movies",

                    // メソッドチェーンで取得したjQueryオブジェクトのメソッドを実行
                }).done(function (data) {

                    // ブラウザで取得できているか確認
                    // console.log(data);

                    // JSONのkeyからvalueを取り出す
                    data.forEach(element => {
                        // console.log(element.id);
                        // console.log(element.name);
                        // console.log(element.director);
                        // console.log(element.rating);

                        // ulタグの子要素として埋め込む
                        var liElements = $('<li></li>');
                        $("#ajax-practice").append(liElements);

                        // ブラウザで表示する際にkeyがわかるように文字列を結合
                        liElements.text(' id:' + element.id + ' name:' + element.name + ' director:' + element.director + ' rating:' + element.rating);
                    });
                })
            });
        });
    </script>
</head>

<body>
    <!-- Ajaxを発火させるためにidを設定 -->
    <h1 id="click">Ajax practice(Click here!!!)</h1>

    <!-- Ajaxで取得したJSONの値をliタグの要素として埋め込む -->
    <ul id="ajax-practice"></ul>
</body>

</html>

</html>